# layer-switching Specification

## Purpose

定义设计页面的图层切换功能，允许用户在基础层、家具层、叠加层之间切换，并根据当前图层显示对应的工具。

## ADDED Requirements

### Requirement: 图层切换按钮

系统 SHALL 在页面顶部提供图层切换按钮组。

#### Scenario: 显示图层按钮

- **WHEN** 用户进入设计页面
- **THEN** 页面顶部显示三个图层按钮：基础层、家具层、叠加层
- **AND** 当前图层按钮高亮显示
- **AND** 默认选中基础层

### Requirement: 切换图层

系统 SHALL 允许用户点击按钮切换当前编辑图层。

#### Scenario: 切换到基础层

- **WHEN** 用户点击"基础层"按钮
- **THEN** 系统切换到基础层编辑模式
- **AND** 工具栏显示墙壁、房间、门、窗工具
- **AND** 高亮显示"基础层"按钮

#### Scenario: 切换到家具层

- **WHEN** 用户点击"家具层"按钮
- **THEN** 系统切换到家具层编辑模式
- **AND** 工具栏显示风扇、椅子、桌子、床工具
- **AND** 高亮显示"家具层"按钮

#### Scenario: 切换到叠加层

- **WHEN** 用户点击"叠加层"按钮
- **THEN** 系统切换到叠加层查看模式
- **AND** 工具栏隐藏或显示分析相关按钮
- **AND** 高亮显示"叠加层"按钮

### Requirement: 工具栏联动

系统 SHALL 根据当前图层动态显示对应的工具。

#### Scenario: 基础层工具

- **WHEN** 当前图层为基础层
- **THEN** 工具栏显示：墙壁、房间、门、窗、选择
- **AND** 隐藏家具相关工具

#### Scenario: 家具层工具

- **WHEN** 当前图层为家具层
- **THEN** 工具栏显示：风扇、椅子、桌子、床、选择、旋转
- **AND** 隐藏基础层相关工具

#### Scenario: 叠加层工具

- **WHEN** 当前图层为叠加层
- **THEN** 工具栏显示：加载分析结果
- **AND** 隐藏绘制工具

### Requirement: 图层可见性

系统 SHALL 在渲染时根据当前模式控制各图层的可见性。

#### Scenario: 基础层模式渲染

- **WHEN** 当前为基础层模式
- **THEN** 渲染基础层元素（墙壁、房间、门、窗）
- **AND** 家具层元素以半透明方式渲染（可选）

#### Scenario: 家具层模式渲染

- **WHEN** 当前为家具层模式
- **THEN** 渲染基础层元素（作为背景参考）
- **AND** 渲染家具层元素

#### Scenario: 叠加层模式渲染

- **WHEN** 当前为叠加层模式
- **THEN** 渲染基础层和家具层元素
- **AND** 叠加渲染通风分析热力图（如已加载）

### Requirement: 选中状态清除

系统 SHALL 在切换图层时清除当前选中状态。

#### Scenario: 切换图层清除选中

- **WHEN** 用户切换到另一个图层
- **THEN** 系统清除当前选中的元素
- **AND** 重置选中相关状态
